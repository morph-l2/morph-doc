"use strict";(self.webpackChunkmorph_doc=self.webpackChunkmorph_doc||[]).push([[6935],{2702:(e,o,n)=>{n.r(o),n.d(o,{assets:()=>a,contentTitle:()=>i,default:()=>u,frontMatter:()=>d,metadata:()=>s,toc:()=>c});var r=n(6070),t=n(1582);const d={title:"Upgrade node running from docker",lang:"en-US"},i=void 0,s={id:"build-on-morph/developer-resources/node-operation/upgrade-node/upgrade-node-docker",title:"Upgrade node running from docker",description:"Docker Images",source:"@site/docs/build-on-morph/developer-resources/node-operation/upgrade-node/2-upgrade-node-docker.md",sourceDirName:"build-on-morph/developer-resources/node-operation/upgrade-node",slug:"/build-on-morph/developer-resources/node-operation/upgrade-node/upgrade-node-docker",permalink:"/docs/build-on-morph/developer-resources/node-operation/upgrade-node/upgrade-node-docker",draft:!1,unlisted:!1,editUrl:"https://github.com/morph-l2/morph-doc/tree/main/docs/build-on-morph/developer-resources/node-operation/upgrade-node/2-upgrade-node-docker.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Upgrade node running from docker",lang:"en-US"},sidebar:"DeveloperSidebar",previous:{title:"Run a validator from source",permalink:"/docs/build-on-morph/developer-resources/node-operation/validator-node/run-on-host"},next:{title:"Upgrade node running on the host",permalink:"/docs/build-on-morph/developer-resources/node-operation/upgrade-node/upgrade-node-host"}},a={},c=[{value:"Docker Images",id:"docker-images",level:2},{value:"If You Are Using a Custom Setup",id:"if-you-are-using-a-custom-setup",level:3},{value:"If You Are Using the Recommended Configuration",id:"if-you-are-using-the-recommended-configuration",level:3},{value:"Step1:  Update docker images version",id:"step1--update-docker-images-version",level:4},{value:"Step2: Restart the container",id:"step2-restart-the-container",level:4}];function l(e){const o={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.h2,{id:"docker-images",children:"Docker Images"}),"\n",(0,r.jsxs)(o.ul,{children:["\n",(0,r.jsxs)(o.li,{children:["\n",(0,r.jsxs)(o.p,{children:[(0,r.jsx)(o.code,{children:"go-ethereum:"})," ",(0,r.jsx)(o.a,{href:"https://github.com/morph-l2/go-ethereum/pkgs/container/go-ethereum",children:"ghcr.io/morph-l2/go-ethereum"})]}),"\n"]}),"\n",(0,r.jsxs)(o.li,{children:["\n",(0,r.jsxs)(o.p,{children:[(0,r.jsx)(o.code,{children:"node:"})," ",(0,r.jsx)(o.a,{href:"https://github.com/morph-l2/morph/pkgs/container/node",children:"ghcr.io/morph-l2/node"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(o.h3,{id:"if-you-are-using-a-custom-setup",children:"If You Are Using a Custom Setup"}),"\n",(0,r.jsx)(o.p,{children:"If you are running the Docker container for the node using a custom setup, you will need to manually update the Docker image version and restart the container."}),"\n",(0,r.jsx)(o.h3,{id:"if-you-are-using-the-recommended-configuration",children:"If You Are Using the Recommended Configuration"}),"\n",(0,r.jsxs)(o.p,{children:["For those using the ",(0,r.jsx)(o.a,{href:"/docs/build-on-morph/developer-resources/node-operation/full-node/run-in-docker",children:"Run a full node with docker"})," o start the container, follow these steps to upgrade your node."]}),"\n",(0,r.jsx)(o.h4,{id:"step1--update-docker-images-version",children:"Step1:  Update docker images version"}),"\n",(0,r.jsxs)(o.ul,{children:["\n",(0,r.jsxs)(o.li,{children:["\n",(0,r.jsxs)(o.p,{children:["Check the latest docker image version from ",(0,r.jsx)(o.a,{href:"#docker-images",children:"Docker Images"})]}),"\n"]}),"\n",(0,r.jsxs)(o.li,{children:["\n",(0,r.jsxs)(o.p,{children:["Update the docker image version on ",(0,r.jsx)(o.a,{href:"https://github.com/morph-l2/run-morph-node/blob/run_node_script/morph-node/docker-compose.yml",children:"morph-node/docker-compose.yml"})]}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-yaml",metastring:'title="morph-node/docker-compose.yml"',children:"services:  \ngeth: \n    container_name: morph-geth\n    image: ghcr.io/morph-l2/go-ethereum:2.0.1 ## Specify the Geth image version\n    restart: unless-stopped\n\n# ...\n\nnode:\n    container_name: morph-node\n    depends_on:\n    geth:\n        condition: service_started\n    image: ghcr.io/morph-l2/node:0.4.0 ## Specify the Node image version\n\n# ...\n\n"})}),"\n",(0,r.jsx)(o.admonition,{type:"tip",children:(0,r.jsx)(o.p,{children:"Optionally update the image version for go-ethereum, node, or both, depending on your requirements."})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(o.h4,{id:"step2-restart-the-container",children:"Step2: Restart the container"}),"\n",(0,r.jsx)(o.p,{children:"Use the following commands to stop and restart the container. The updated Docker images will be pulled automatically."}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-js",children:"// stop the docker containers\nmake stop-node\n\n// start the docker container, it will automatically pull the updated docker images\nmake run-node\n"})}),"\n",(0,r.jsxs)(o.p,{children:["If you are running a ",(0,r.jsx)(o.strong,{children:"validator"}),", use these commands instead:"]}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-bash",children:"make stop-validator\nmake run-validator\n"})}),"\n",(0,r.jsxs)(o.admonition,{type:"note",children:[(0,r.jsx)(o.mdxAdmonitionTitle,{}),(0,r.jsxs)(o.p,{children:["Ensure that the startup parameters for the Docker container remain consistent with your previous configuration. If you previously used a custom setup, verify that the configuration and directory paths match your earlier setup. For details, please refer to ",(0,r.jsx)(o.a,{href:"/docs/build-on-morph/developer-resources/node-operation/full-node/run-in-docker#advanced-usage",children:(0,r.jsx)(o.strong,{children:"Advanced Usage"})})]})]})]})}function u(e={}){const{wrapper:o}={...(0,t.R)(),...e.components};return o?(0,r.jsx)(o,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},1582:(e,o,n)=>{n.d(o,{R:()=>i,x:()=>s});var r=n(758);const t={},d=r.createContext(t);function i(e){const o=r.useContext(d);return r.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function s(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),r.createElement(d.Provider,{value:o},e.children)}}}]);